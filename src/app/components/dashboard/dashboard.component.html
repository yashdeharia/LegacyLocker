<!-- <p>dashboard works!</p>
<div class="container">
    <h2>Welcome to Dashboard</h2>
    <button class="btn btn-danger" (click)="logout()">Logout</button>
  </div> -->

<div class="dashboard-container">

  <!-- No need as there is nav bar -->
  <!-- <h2>Welcome to Dashboard</h2>

 
  <button (click)="logout()">Logout</button> --> 

  <hr>


  <!-- <h3>Add Digital Assets</h3> -->

  <!-- Add / Update Asset Form -->
  <!-- <input [(ngModel)]="newAsset.name" placeholder="Asset Name">
  <input [(ngModel)]="newAsset.description" placeholder="Description">
  <input [(ngModel)]="newAsset.type" placeholder="Type">
  <button (click)="addDigitalAsset()">Add Asset</button> -->

  <!-- new css add asset commit -->

  <div class="add-asset-container">
    <h3>Add Digital Assets</h3>
  
    <!-- Add / Update Asset Form -->
    <input class="form-input" [(ngModel)]="newAsset.name" type="text" placeholder="Asset Name">
    <input class="form-input" [(ngModel)]="newAsset.description" type="text" placeholder="Description">
    <input class="form-input" [(ngModel)]="newAsset.type" type="text" placeholder="Type">
    <button class="add-asset-btn" (click)="addDigitalAsset()">Add Asset</button>
  </div>

  <h3>Digital Assets</h3>
<ul>
  <li *ngFor="let asset of digitalAssets">
    <strong>{{ asset.name }}</strong> - {{ asset.type }} 
    <button (click)="startEdit(asset)">Edit</button>
    <button (click)="deleteDigitalAsset(asset.id)">Delete</button>

    <!-- Display Beneficiary -->
     <div *ngIf="asset.beneficiaries.length > 0">

      <h4>Beneficiary:</h4>
      <ul>
        <li *ngFor="let beneficiary of asset.beneficiaries">


          {{beneficiary.name}}
          ({{beneficiary.relationship}})

          <!-- <button (click) = "deleteBeneficiary(beneficiary.id, asset.id)">Remove</button> -->

        </li>
      </ul>

     </div>
  </li>
</ul>

<!-- Add Asset Form -->
<!-- <h3>Add New Digital Asset</h3>
<input type="text" [(ngModel)]="newAsset.name" placeholder="Name" />
<input type="text" [(ngModel)]="newAsset.type" placeholder="Type" />
<textarea [(ngModel)]="newAsset.description" placeholder="Description"></textarea>
<button (click)="addDigitalAsset()">Add</button> -->

<!-- Edit Form -->
<div *ngIf="editingAsset">
  <h3>Edit Digital Asset</h3>
  <input type="text" [(ngModel)]="editingAsset.name" placeholder="Name" />
  <input type="text" [(ngModel)]="editingAsset.type" placeholder="Type" />
  <textarea [(ngModel)]="editingAsset.description" placeholder="Description"></textarea>
  <button (click)="updateAsset()">Update</button>
  <button (click)="cancelEdit()">Cancel</button>
</div>
  

  <hr />

  <!-- //add Beneficiary -->

  <h2>Assign Beneficiary</h2>
  <form (submit)="assignBeneficiary()">
    <label for="asset">Select Digital Asset:</label>
    <select id="asset" [(ngModel)]="newBeneficiary.assetId" name="assetId" required>
      <option *ngFor="let asset of digitalAssets" [value]="asset.id">{{ asset.name }}</option>
    </select>
  
    <label for="name">Beneficiary Name:</label>
    <input type="text" id="name" [(ngModel)]="newBeneficiary.name" name="name" required>
  
    <label for="relationship">Relationship:</label>
    <input type="text" id="relationship" [(ngModel)]="newBeneficiary.relationship" name="relationship" required>
  
    <button type="submit">Assign Beneficiary</button>
  </form>

  <!-- Asset List -->
  <!-- <div *ngIf="digitalAssets.length > 0; else noAssets">
    <h3>Your Digital Assets</h3>
    <ul>
      <li *ngFor="let asset of digitalAssets">
        <strong>{{ asset.name }}</strong> ({{ asset.type }})
        <p>{{ asset.description }}</p>
        
        <button (click)="deleteDigitalAsset(asset.id)">Delete</button>
      </li>
    </ul>
  </div>

  <ng-template #noAssets>
    <p>No digital assets found.</p>
  </ng-template> -->

  <!-- Asset List -->
<div *ngIf="digitalAssets.length > 0; else noAssets">
  <h3>Your Digital Assets</h3>
  <div class="asset-grid">
    <div class="asset-card" *ngFor="let asset of digitalAssets">
      <div class="card-content">
        <strong>{{ asset.name }}</strong>
        <span class="asset-type">{{ asset.type }}</span>
        <h6>Beneficiary</h6>
        <p>{{ asset.description }}</p>
        <li *ngFor="let beneficiary of asset.beneficiaries">


          {{beneficiary.name}}
          ({{beneficiary.relationship}})

          <!-- <button (click) = "deleteBeneficiary(beneficiary.id, asset.id)">Remove</button> -->

        </li>
      </div>
      <button class="delete-btn" (click)="deleteDigitalAsset(asset.id)">Delete</button>
    </div>
  </div>
</div>

<ng-template #noAssets>
  <p>No digital assets found.</p>
</ng-template>

</div>